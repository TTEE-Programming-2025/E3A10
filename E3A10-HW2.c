#include <stdio.h>
#include <stdlib.h>

// 函式原型
void welcome();
int pw();
void menu();
void tri();
void math();
void exit();

int main() {
    int ok = 0;
    char choice, temp;

    welcome();
    ok = pw();

    if (!ok) {
        printf("\n連續錯誤三次！系統鎖定，請稍後再試。\n");
        return 0;
    }

    while (1) {
        system("cls");
        menu();

        printf("\n請輸入選項：");
        scanf(" %c", &choice);

        switch (choice) {
            case 'A':
            case 'a':
                system("cls");
                tri();
                break;
            case 'B':
            case 'b':
                system("cls");
                math();
                break;
            case 'C':
            case 'c':
                system("cls");
                exit();
                break;
            default:
                printf("\n無效選項，請重新輸入...\n");
                printf("按任意鍵返回主選單...");
                scanf(" %c", &temp);
        }
    }
    return 0;
}

// --------------------------------------
// 顯示歡迎畫面
void welcome() {
    printf("                   .-                                                                               \n");
	printf("                   -===.                                                                            \n");
	printf("                   -+--=-                                                                           \n");
	printf("                   :+=---=:                                                                         \n");
	printf("                   :++=---==.                                                                       \n");
	printf("                   .*++=------+-                                                                    \n");
	printf("                    *+++=-------=:                                                                  \n"); 
	printf("                    *+++=--------==.    :.                   .--==                                  \n");
	printf("                    *++++=------===+-   +*-   ..        .-=+**++*.                                  \n"); 
	printf("                    ++++++====---=+==+: #***:.**:   :=+******++*.                                   \n"); 
	printf("                    +++++++=======+++++*#****#***-=***********#:                                    \n"); 
	printf("     ::             =+++++++=+++++++++++++++++++++++*********#-                                     \n"); 
	printf("     =-+=.          :*+++++++++++++++++=========+++++++++***#+:--===+                               \n"); 
	printf(" .--=+*++++=-       .*+++++++++++==--------------=====++++++********.                               \n"); 
	printf(" :===+++++=--==:     *++++++++=---------------------===+++++++++***..:::...:::::---=---------::..   \n"); 
	printf("   :++++++=-----=-.  +++++*+=-------------------------==++++++++++++==--======----------------+**.  \n");
	printf("   .+++++++=------==-*+**+++=--------------------------===+++++++++++=-------------------==++++:    \n");
	printf("  .++++++++++=----==+##*+++=---------------------------====+++++++++++=---------------==++++*-      \n");
	printf("    :=*+++++++=--=++*#+++==----------------------------====++++++++++++==--------===++++++*=        \n");
	printf("      .+++++++++===+++++++=-----------------------------===+=+++++++++====---==+++++++++*+.         \n");
	printf("       .*++++++++++++++++=----=-------------------------===++++++++++++====+++++++++++*+.           \n");
	printf("        :++++++++++++++++====-+-----------------------====++++++++++++++++++++++++++*+:             \n");
	printf("         =++++++++++++++++++++-+---------------------==+++++++++++++++++++++++++++++:               \n");
	printf("          =+++++++++++++++++=..==------------------==++++++++++++++++++++++++++++*:                 \n");
	printf("           =++*++++++++++++=...:+----------------===+++++++++++++++++++++++++++*-                   \n");
	printf("            **++++++++++++*.....-*=--===------==+++++++++++++++++++++++++++++*-                     \n");
	printf("            +++++++++++++++.....:*+++=+++=====++++++++++++++***+++++++++*++*=                       \n");
	printf("           :+++++++++++++++.....:%*++++++++++++++==++++++++=:*+++++++++++#=.                        \n");
	printf("           +=++++++++#++++*-....:+++++++++++++++===++++*=:::.#+++++++++++*:.                        \n");
	printf("          .+==+++++++**+++++=..::::*++++++++++++==++*+=::::::*+++++++++++#+***+++====---:.          \n");
	printf("          =-===++++++:.*+++++*=-:::=++++++++++++++*#:...::::+++++++++++++#++++++++++++=--==+=       \n");
	printf("          +--==+++++*: .=++++++++***+++++++++++++--=.....:::*++++++++++++*++++++++++++++++**:       \n");
	printf("          #====++++++-   -*++++++++++++++++++*#:........::-+++++++++++++++++++++++++++++++++-==     \n");
	printf("          *=====+++++=   :-=*+++++++++++++++++++-......:-=++++++++++++++++++++++++++++++++++=-      \n");
	printf("          *=====++***#.  =...-+*+++++++++++++++++*++=+++++++++++++++++++++++++++++++++++++*.        \n");
	printf("          *====+++****+ .-......=*+*++++++++++++++++++++++++**+++++++++++++++++++++++*+=-+*         \n");
	printf("          +=====******#=-.......-...-=+**++++++++++++++++**#*+++++++++++++++++++++*+=.              \n");
	printf("          ++++==+*******#.......=........:-=*+++***+**==-:-*++++++++*+**++++++**=-                  \n");
	printf("        =##%*++***############==...........=....   .- -**************#.                             \n");
	printf("       .#####***################*=-.......-:..     ==*###############-                              \n");
	printf("       =+**##***#####################*==--+...:-=+*#################+                               \n");
	printf("       *++**##**###################################################*                                \n");
	printf("       *++++**#####################################################.                                \n");
	printf("       ++++++**###################################################.                                 \n");
	printf("       .*+++++**###################################**+++++**#%%##.                                  \n");
	printf("        =*+++++*################################**+++++++++***##.                                   \n");
	printf("         =#*++**###############################*+++++++++++****#:                                   \n");
	printf("          .+##################################*++++++++++++*****+                                   \n");
	printf("            .-%########+#**##################**++++++++++++******                                   \n");
	printf("              +#######* .=#***##############****+++++++=++*******                                   \n");
	printf("               =#*##+=+    -+##*############****++**++++++++++++*                                   \n");
	printf("                . :+.        .-+%%##########***+++++++++++++++++=                                   \n");
	printf("                                -###%%%%%-:.+*+++++++++++++++++*.                                   \n");
	printf("                                 .*#####:    -*++++*%***#++++++=                                    \n");
	printf("                                   -*##*      =+++###%######++=                                     \n");
	printf("                                      :        ++*#########**-                                      \n");
	printf("                                               .**########*+.                                       \n");
	printf("                                                -**######+:                                         \n");
	printf("                                                 .-=+*+=.                                           \n");
	system("PAUSE");
	system("cls");// 清除螢幕
}

// --------------------------------------
// 密碼檢查，最多三次
int pw() {
    int pw = 2025;
    int input, a = 0;

    while (a < 3) {
        printf("\n請輸入 4 位數密碼 (提示：2025)：");
        scanf("%d", &input);

        if (input == pw) {
            printf("密碼正確，進入系統...\n");
            return 1;
        } else {
            printf("密碼錯誤！\n");
            a++;
        }
    }
    return 0;
}

// --------------------------------------
// 顯示主選單
void menu() {
    printf("-----------------------------\n");
    printf("| a. 畫出直角三角形         |\n");
    printf("| b. 顯示乘法表             |\n");
    printf("| c. 結束                   |\n");
    printf("-----------------------------\n");
}

// --------------------------------------
// 畫直角三角形
void tri() {
    char ch;
    while (1) {
        printf("請輸入一個 'a' 到 'n' 的字元: ");
        scanf(" %c", &ch);

        if (ch >= 'a' && ch <= 'n') {// 判斷輸入的字元是否在 'a' 到 'n' 之間
            int l = ch - 'a' + 1;// 計算要印幾行，'a' 是 1 行，'b' 是 2 行
            for (int i = 1; i <= l; i++) {// 外層迴圈控制第 i 行
                for (int s = 0; s < l - i; s++) {// 先印空格，使三角形靠右
                    printf(" ");
                }
                for (char c = ch - i + 1; c <= ch; c++) {// 再印字元，從較小的字母到輸入的字母
                    printf("%c", c);// 每列結束後換行
                }
                printf("\n");
            }
            printf("\n按任意鍵返回主選單...");
            system("pause"); // 等待使用者按任意鍵
			system("cls");   // 清除螢幕
            break;
        } else {
            printf("錯誤：請輸入 'a' 到 'n' 的字元！\n");
        }
    }
}

// --------------------------------------
// 顯示乘法表
void math() {
    int n;

    do {
        printf("請輸入一個 1~9 的整數：");
        scanf("%d", &n);

        if (n >= 1 && n <= 9) {
            printf("\n產生 %d x %d 的乘法表：\n\n", n, n);
            for (int i = 1; i <= n; i++) {
                for (int j = 1; j <= n; j++) {
                    printf("%d*%d=%-3d ", i, j, i * j);
                }
                printf("\n");
            }
            break;
        } else {
            printf("輸入錯誤！請重新輸入 1~9 的整數。\n");
        }
    } while (1);

    printf("\n按任意鍵返回主選單...");
    system("pause");
}

// --------------------------------------
// 程式結束功能
void exit() {
    char ans;

    do {
        printf("是否確定要結束？(y/n)：");
        scanf(" %c", &ans);

        if (ans == 'y' || ans == 'Y') {
            printf("\n再見！\n");
            exit(0);
        } else if (ans == 'n' || ans == 'N') {
            break;
        } else {
            printf("輸入錯誤！請輸入 y 或 n。\n");
        }
    } while (1);
}
//心得討論:個人認為這次作業難度增加很多，需要更多的思考與常識，慢慢試錯。最難的我覺得是畫直角三角形那題，需要先計算行數 ，並且在每一行中分別印出正確的空格數量
//和字母範圍。這中間如果稍微算錯，三角形形狀就會完全跑掉。


